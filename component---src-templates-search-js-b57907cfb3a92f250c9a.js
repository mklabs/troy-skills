(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{kg2G:function(e,t,n){},xAcC:function(e,t,n){"use strict";n.r(t);var a=n("KQm4"),r=n("q1tI"),i=n.n(r),s=n("Bl7J"),c=n("vrFN"),o=function(){function e(){}return e.prototype.expandToken=function(e){for(var t=[],n="",a=0,r=e.length;a<r;++a)n+=e.charAt(a),t.push(n);return t},e}(),l=function(){function e(){}return e.prototype.sanitize=function(e){return e?e.toLocaleLowerCase().trim():""},e}();function u(e,t){t=t||[];for(var n=e=e||{},a=0;a<t.length;a++)if(null==(n=n[t[a]]))return null;return n}var d=function(){function e(e){this._uidFieldName=e,this._tokenToIdfCache={},this._tokenMap={}}var t=e.prototype;return t.indexDocument=function(e,t,n){this._tokenToIdfCache={};var a,r=this._tokenMap;"object"!=typeof r[e]?r[e]=a={$numDocumentOccurrences:0,$totalNumOccurrences:1,$uidMap:{}}:(a=r[e]).$totalNumOccurrences++;var i=a.$uidMap;"object"!=typeof i[t]?(a.$numDocumentOccurrences++,i[t]={$document:n,$numTokenOccurrences:1}):i[t].$numTokenOccurrences++},t.search=function(e,t){for(var n={},a=0,r=e.length;a<r;a++){var i=e[a],s=this._tokenMap[i];if(!s)return[];if(0===a)for(var c=0,o=(l=Object.keys(s.$uidMap)).length;c<o;c++){n[u=l[c]]=s.$uidMap[u].$document}else{var l;for(c=0,o=(l=Object.keys(n)).length;c<o;c++){var u=l[c];"object"!=typeof s.$uidMap[u]&&delete n[u]}}}var d=[];for(var u in n)d.push(n[u]);var f=this._createCalculateTfIdf();return d.sort((function(n,a){return f(e,a,t)-f(e,n,t)}))},t._createCalculateIdf=function(){var e=this._tokenMap,t=this._tokenToIdfCache;return function(n,a){if(!t[n]){var r=void 0!==e[n]?e[n].$numDocumentOccurrences:0;t[n]=1+Math.log(a.length/(1+r))}return t[n]}},t._createCalculateTfIdf=function(){var e=this._tokenMap,t=this._uidFieldName,n=this._createCalculateIdf();return function(a,r,i){for(var s=0,c=0,o=a.length;c<o;++c){var l,d=a[c],f=n(d,i);f===1/0&&(f=0),l=t instanceof Array?r&&u(r,t):r&&r[t],s+=(void 0!==e[d]&&void 0!==e[d].$uidMap[l]?e[d].$uidMap[l].$numTokenOccurrences:0)*f}return s}},e}(),f=/[^a-zа-яё0-9\-']+/i,h=function(){function e(){}return e.prototype.tokenize=function(e){return e.split(f).filter((function(e){return e}))},e}();function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(e){if(!e)throw Error("js-search requires a uid field name constructor parameter");this._uidFieldName=e,this._indexStrategy=new o,this._searchIndex=new d(e),this._sanitizer=new l,this._tokenizer=new h,this._documents=[],this._searchableFields=[]}var t,n,a,r=e.prototype;return r.addDocument=function(e){this.addDocuments([e])},r.addDocuments=function(e){this._documents=this._documents.concat(e),this.indexDocuments_(e,this._searchableFields)},r.addIndex=function(e){this._searchableFields.push(e),this.indexDocuments_(this._documents,[e])},r.search=function(e){var t=this._tokenizer.tokenize(this._sanitizer.sanitize(e));return this._searchIndex.search(t,this._documents)},r.indexDocuments_=function(e,t){this._initialized=!0;for(var n=this._indexStrategy,a=this._sanitizer,r=this._searchIndex,i=this._tokenizer,s=this._uidFieldName,c=0,o=e.length;c<o;c++){var l,d=e[c];l=s instanceof Array?u(d,s):d[s];for(var f=0,h=t.length;f<h;f++){var m,p=t[f];if(null!=(m=p instanceof Array?u(d,p):d[p])&&"string"!=typeof m&&m.toString&&(m=m.toString()),"string"==typeof m)for(var g=i.tokenize(a.sanitize(m)),v=0,y=g.length;v<y;v++)for(var E=g[v],_=n.expandToken(E),b=0,w=_.length;b<w;b++){var k=_[b];r.indexDocument(k,l,d)}}}},t=e,(n=[{key:"indexStrategy",set:function(e){if(this._initialized)throw Error("IIndexStrategy cannot be set after initialization");this._indexStrategy=e},get:function(){return this._indexStrategy}},{key:"sanitizer",set:function(e){if(this._initialized)throw Error("ISanitizer cannot be set after initialization");this._sanitizer=e},get:function(){return this._sanitizer}},{key:"searchIndex",set:function(e){if(this._initialized)throw Error("ISearchIndex cannot be set after initialization");this._searchIndex=e},get:function(){return this._searchIndex}},{key:"tokenizer",set:function(e){if(this._initialized)throw Error("ITokenizer cannot be set after initialization");this._tokenizer=e},get:function(){return this._tokenizer}}])&&m(t.prototype,n),a&&m(t,a),e}(),g=n("cr+I"),v=n.n(g),y=n("Wbzz"),E=n("9eSz"),_=n.n(E),b=function(e){var t=e.results,n=e.query,a=e.categories,s=e.names,c=Object(y.useStaticQuery)("1911467781").images,o="undefined"!=typeof window?window.localStorage.getItem("search.filter.categories"):"",l=Object(r.useState)(o||"All"),u=l[0],d=l[1],f="undefined"!=typeof window?window.localStorage.getItem("search.filter.names"):"",h=Object(r.useState)(f||"All"),m=h[0],p=h[1],g=function(e,t){var n=t.target.value;"categories"===e?d(n):"names"===e&&p(n),window.localStorage.setItem("search.filter."+e,n)},v=function(){},E=n?'No results for "'+n+'" query':"Please, enter a search query to see some results.";if(!t.length)return i.a.createElement("div",{className:"search-results"},E);var b=["Envoy","Priestess","Spy"],w=["Achilles","Aeneas","Agamemnon","Hector","Hippolyta","Menelaus","Odysseus","Paris","Penthesilea","Sarpedon"],k=t.length,z=b.includes(m),S=w.includes(m);if(u&&"All"!==u){var x=z&&"Hippolyta's Amazons"===u?"Common":u;"Penthesilea's Amazons"===u&&"Penthesilea"===m||"Hippolyta's Amazons"===u&&"Hippolyta"===m||S&&"Common"===u||(t=t.filter((function(e){return e.category===x})))}return m&&"All"!==m&&(t=t.filter((function(e){return e.name===m}))),i.a.createElement("div",{className:"search-results"},i.a.createElement("div",{className:"search-results-header"},i.a.createElement("div",{className:"search-results-count"},t.length," results"),i.a.createElement("div",{className:"search-results-filters"},i.a.createElement("span",{className:"select search-results-filter"},i.a.createElement("select",{value:u,onBlur:v,onChange:function(e){return g("categories",e)}},i.a.createElement("option",{value:"All"},"All categories"),i.a.createElement("option",{disabled:!0,"aria-label":"Disabled"}),a.map((function(e){return i.a.createElement("option",{key:e,value:e},e)})))),i.a.createElement("span",{className:"select search-results-filter"},i.a.createElement("select",{value:m,onBlur:v,onChange:function(e){return g("names",e)}},i.a.createElement("option",{value:"All"},"All names"),i.a.createElement("optgroup",{label:"Epic Heroes"},s.map((function(e){return w.includes(e)?i.a.createElement("option",{key:e,value:e},e):null}))),i.a.createElement("optgroup",{label:"Hero Classes"},s.map((function(e){return w.includes(e)||b.includes(e)?null:i.a.createElement("option",{key:e,value:e},e)}))),i.a.createElement("optgroup",{label:"Agents"},s.map((function(e){return b.includes(e)?i.a.createElement("option",{key:e,value:e},e):null}))))))),t.length?"":i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"There is however ",k," results without filters."),i.a.createElement("p",null,i.a.createElement("button",{onClick:function(){window.localStorage.setItem("search.filter.names","All"),window.localStorage.setItem("search.filter.categories","All"),p("All"),d("All")},style:{paddingLeft:0}},"Clear filters"))),t.map((function(e,t){var n=c.nodes.find((function(t){return e.image_path===""+t.name+t.ext}));return i.a.createElement("div",{className:"search-result",key:t},i.a.createElement("div",{className:"search-result-icon"},n?i.a.createElement(_.a,{fixed:n.childImageSharp.fixed}):""),i.a.createElement("div",{className:"search-result-content"},i.a.createElement("h4",{className:"search-result-title"},i.a.createElement(y.Link,{to:e.slug},e.localised_name),i.a.createElement("span",{className:"search-result-character"},e.character.title)),i.a.createElement("p",{className:"search-result-description"},e.localised_description)))})))},w=n("QOXG");n("kg2G"),t.default=function(e){e.data;var t=e.pageContext,n="undefined"!=typeof window?window.location.hash:"",u=t.searchData.documents,d=Object(r.useState)(""),f=d[0],h=d[1],m=Object(r.useState)([]),g=m[0],y=m[1],E=Object(r.useState)(!0),_=E[0],k=E[1],z=Object(r.useState)(null),S=z[0],x=z[1],I=Object(r.useRef)(null);Object(r.useEffect)((function(){x(function(e){var t=new p("uid");return t.indexStrategy=new o,t.sanitizer=new l,t.addIndex("localised_name"),t.addDocuments(e),t}(u))}),[]),Object(r.useEffect)((function(){var e=v.a.parse(n);e.query&&h(e.query)}),[S,n]),Object(r.useEffect)((function(){f&&(window.location.hash=v.a.stringify({query:f}),k(!0),setTimeout((function(){y(function(e,t){return e&&t?e.search(t).sort((function(e,t){return e.slug===t.slug?0:e.slug>t.slug?1:-1})):[]}(S,f)),k(!1)}),500))}),[S,f]);var N=["Amazons","Danaans","Trojans","Horde Amazons"],A=function(e,t){return e===t?0:e<t?-1:1},O=Object(a.a)(new Set(u.map((function(e){return e.category})))).sort(A).filter((function(e){return!N.includes(e)})),j=Object(a.a)(new Set(u.map((function(e){return e.name})))).sort((function(e,t){return e.includes("-")&&!t.includes("-")?1:t.includes("-")&&!e.includes("-")?-1:A(e,t)}));return i.a.createElement(s.a,null,i.a.createElement(c.a,{title:"Search"}),i.a.createElement("div",{className:"search"},i.a.createElement("div",{className:"page-header"},i.a.createElement("div",{className:"container"},i.a.createElement("h2",{className:"page-header-title"},"Search Results /"),i.a.createElement("h3",{className:"page-header-subtitle search-header-query",contentEditable:"true",spellCheck:"false",ref:I,suppressContentEditableWarning:!0,role:"presentation",onKeyPress:function(e){if("Enter"===e.key){var t=I.current.textContent;h(t),I.current.blur()}}},f))),i.a.createElement("div",{className:"container",style:{paddingTop:0}},_&&f?i.a.createElement("div",{className:"search-results"},i.a.createElement(w.a,null)):i.a.createElement(b,{results:g,query:f,categories:O,names:j}))))}}}]);
//# sourceMappingURL=component---src-templates-search-js-b57907cfb3a92f250c9a.js.map