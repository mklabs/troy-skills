(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{kg2G:function(e,t,n){},xAcC:function(e,t,n){"use strict";n.r(t),n.d(t,"query",(function(){return E}));var r=n("q1tI"),i=n.n(r),a=n("Wbzz"),c=n("9eSz"),o=n.n(c),s=n("Bl7J"),u=n("vrFN"),l=function(){function e(){}return e.prototype.expandToken=function(e){for(var t,n=[],r=0,i=e.length;r<i;++r){t="";for(var a=r;a<i;++a)t+=e.charAt(a),n.push(t)}return n},e}(),h=function(){function e(){}return e.prototype.expandToken=function(e){return e?[e]:[]},e}(),d=function(){function e(){}return e.prototype.expandToken=function(e){for(var t=[],n="",r=0,i=e.length;r<i;++r)n+=e.charAt(r),t.push(n);return t},e}(),f=function(){function e(){}return e.prototype.sanitize=function(e){return e?e.trim():""},e}(),m=function(){function e(){}return e.prototype.sanitize=function(e){return e?e.toLocaleLowerCase().trim():""},e}();function p(e,t){t=t||[];for(var n=e=e||{},r=0;r<t.length;r++)if(null==(n=n[t[r]]))return null;return n}var _=function(){function e(e){this._uidFieldName=e,this._tokenToIdfCache={},this._tokenMap={}}var t=e.prototype;return t.indexDocument=function(e,t,n){this._tokenToIdfCache={};var r,i=this._tokenMap;"object"!=typeof i[e]?i[e]=r={$numDocumentOccurrences:0,$totalNumOccurrences:1,$uidMap:{}}:(r=i[e]).$totalNumOccurrences++;var a=r.$uidMap;"object"!=typeof a[t]?(r.$numDocumentOccurrences++,a[t]={$document:n,$numTokenOccurrences:1}):a[t].$numTokenOccurrences++},t.search=function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var a=e[r],c=this._tokenMap[a];if(!c)return[];if(0===r)for(var o=0,s=(u=Object.keys(c.$uidMap)).length;o<s;o++){n[l=u[o]]=c.$uidMap[l].$document}else{var u;for(o=0,s=(u=Object.keys(n)).length;o<s;o++){var l=u[o];"object"!=typeof c.$uidMap[l]&&delete n[l]}}}var h=[];for(var l in n)h.push(n[l]);var d=this._createCalculateTfIdf();return h.sort((function(n,r){return d(e,r,t)-d(e,n,t)}))},t._createCalculateIdf=function(){var e=this._tokenMap,t=this._tokenToIdfCache;return function(n,r){if(!t[n]){var i=void 0!==e[n]?e[n].$numDocumentOccurrences:0;t[n]=1+Math.log(r.length/(1+i))}return t[n]}},t._createCalculateTfIdf=function(){var e=this._tokenMap,t=this._uidFieldName,n=this._createCalculateIdf();return function(r,i,a){for(var c=0,o=0,s=r.length;o<s;++o){var u,l=r[o],h=n(l,a);h===1/0&&(h=0),u=t instanceof Array?i&&p(i,t):i&&i[t],c+=(void 0!==e[l]&&void 0!==e[l].$uidMap[u]?e[l].$uidMap[u].$numTokenOccurrences:0)*h}return c}},e}(),v=/[^a-zа-яё0-9\-']+/i,g=function(){function e(){}return e.prototype.tokenize=function(e){return e.split(v).filter((function(e){return e}))},e}();function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(e){if(!e)throw Error("js-search requires a uid field name constructor parameter");this._uidFieldName=e,this._indexStrategy=new d,this._searchIndex=new _(e),this._sanitizer=new m,this._tokenizer=new g,this._documents=[],this._searchableFields=[]}var t,n,r,i=e.prototype;return i.addDocument=function(e){this.addDocuments([e])},i.addDocuments=function(e){this._documents=this._documents.concat(e),this.indexDocuments_(e,this._searchableFields)},i.addIndex=function(e){this._searchableFields.push(e),this.indexDocuments_(this._documents,[e])},i.search=function(e){var t=this._tokenizer.tokenize(this._sanitizer.sanitize(e));return this._searchIndex.search(t,this._documents)},i.indexDocuments_=function(e,t){this._initialized=!0;for(var n=this._indexStrategy,r=this._sanitizer,i=this._searchIndex,a=this._tokenizer,c=this._uidFieldName,o=0,s=e.length;o<s;o++){var u,l=e[o];u=c instanceof Array?p(l,c):l[c];for(var h=0,d=t.length;h<d;h++){var f,m=t[h];if(null!=(f=m instanceof Array?p(l,m):l[m])&&"string"!=typeof f&&f.toString&&(f=f.toString()),"string"==typeof f)for(var _=a.tokenize(r.sanitize(f)),v=0,g=_.length;v<g;v++)for(var y=_[v],k=n.expandToken(y),z=0,x=k.length;z<x;z++){var w=k[z];i.indexDocument(w,u,l)}}}},t=e,(n=[{key:"indexStrategy",set:function(e){if(this._initialized)throw Error("IIndexStrategy cannot be set after initialization");this._indexStrategy=e},get:function(){return this._indexStrategy}},{key:"sanitizer",set:function(e){if(this._initialized)throw Error("ISanitizer cannot be set after initialization");this._sanitizer=e},get:function(){return this._sanitizer}},{key:"searchIndex",set:function(e){if(this._initialized)throw Error("ISearchIndex cannot be set after initialization");this._searchIndex=e},get:function(){return this._searchIndex}},{key:"tokenizer",set:function(e){if(this._initialized)throw Error("ITokenizer cannot be set after initialization");this._tokenizer=e},get:function(){return this._tokenizer}}])&&y(t.prototype,n),r&&y(t,r),e}(),z=n("cr+I"),x=n.n(z),w=(n("kg2G"),{indexStrategy:"Prefix match",searchSanitizer:"Lower Case"}),b=function(e,t){return e&&t?e.search(t).sort((function(e,t){return e.slug===t.slug?0:e.slug>t.slug?1:-1})):[]},E=(t.default=function(e){var t=e.data,n=e.pageContext,c="undefined"!=typeof window?window.location.hash:"",p=n.searchData.documents,_=t.images,v=Object(r.useState)(""),g=v[0],y=v[1],z=Object(r.useState)([]),E=z[0],S=z[1],I=Object(r.useState)(null),N=I[0],O=I[1];return Object(r.useEffect)((function(){O(function(e,t){var n=t.indexStrategy,r=t.searchSanitizer,i=new k("uid");return"All"===n?i.indexStrategy=new l:"Exact match"===n?i.indexStrategy=new h:"Prefix match"===n&&(i.indexStrategy=new d),"Lower Case"===r?i.sanitizer=new m:"Case Sensitive"===r&&(i.sanitizer=new f),i.addIndex("localised_name"),i.addDocuments(e),i}(p,w))}),[]),Object(r.useEffect)((function(){var e=x.a.parse(c);e.query&&(y(e.query),S(b(N,e.query)))}),[N,c]),Object(r.useEffect)((function(){g&&(window.search=N,S(b(N,g)))}),[N,g]),i.a.createElement(s.a,null,i.a.createElement(u.a,{title:"Search"}),i.a.createElement("div",{className:"search"},i.a.createElement("div",{className:"page-header"},i.a.createElement("div",{className:"container"},i.a.createElement("h2",{className:"page-header-title"},"Search Results /"),i.a.createElement("h3",{className:"page-header-subtitle"},g))),i.a.createElement("div",{className:"container",style:{paddingTop:0}},i.a.createElement("div",{className:"search-results"},E.map((function(e,t){var n=_.nodes.find((function(t){return e.image_path===""+t.name+t.ext}));return i.a.createElement("div",{className:"search-result",key:t},i.a.createElement("div",{className:"search-result-icon"},i.a.createElement(o.a,{fixed:n.childImageSharp.fixed})),i.a.createElement("div",{className:"search-result-content"},i.a.createElement("h4",{className:"search-result-title"},i.a.createElement(a.Link,{to:e.slug},e.localised_name),i.a.createElement("span",{className:"search-result-character"},e.character.title)),i.a.createElement("p",{className:"search-result-description"},e.localised_description)))}))))))},"1911467781")}}]);
//# sourceMappingURL=component---src-templates-search-js-fde135ffe7d7fb2a6a99.js.map